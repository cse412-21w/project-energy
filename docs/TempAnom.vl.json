{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json", 
  "data": {
    "url": "https://raw.githubusercontent.com/dreece2304/CSE-412/main/CombinedData.json"
  },
  "width": 650,
  "height": 400,
  "params": [{
    "name": "Highlight", "value": 1880,
    "bind":{"input": "range", "min": 1880, "max": 2020, "step": 10}
  }
    ],
  "transform": [
    {"calculate": "year(datum.Year)", "as": "year"},
    {"calculate": "floor(datum.year / 10)", "as": "decade"},
    {
      "calculate": "(datum.year % 10) + (month(datum.Year)/12)",
      "as": "scaled_date"
    },
    {
      "calculate": "datum.first_Year === datum.scaled_Year ? 'first' : datum.last_Year === datum.scaled_Year ? 'last' : null",
      "as": "end"
    }
  ],
  "encoding": {
    "x": {
      "type": "quantitative",
      "title": "Year into Decade",
      "axis": {"tickCount": 11}
    },
    "y": {
      "title": "Temperature Anomaly from Average",
      "type": "quantitative",
      "scale": {"zero": false}
    },
    "color": {
      "field": "decade",
      "type": "ordinal",
      "scale": {"scheme": "magma"},
      "legend": null
      }
    },
  "layer": [
    {
    "mark": "line",
    "encoding": {
      "x": {"field": "scaled_date"},
      "y": {"field": "Temperature"}
      }
    },
    {
    "mark": {"type": "text", "baseline": "top", "aria": false},
    "encoding": {
      "x": {"aggregate": "min", "field": "scaled_date"},
      "y": {"aggregate": {"argmin": "scaled_date"}, "field": "Temperature"},
      "text": {"aggregate": {"argmin": "scaled_date"}, "field": "year"}
      }
    },
    {
    "mark": {"type": "text", "aria": false},
    "encoding": {
      "x": {"aggregate": "max", "field": "scaled_date"},
      "y": {"aggregate": {"argmax": "scaled_date"}, "field": "Temperature"},
      "text": {"aggregate": {"argmax": "scaled_date"}, "field": "year"}
      }
    }
  ],
  "config": {"text": {"align": "left", "dx": 3, "dy": 1}}

}